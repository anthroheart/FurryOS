# üîß ISO Build Fix + USB Writer Guide

## üêõ Problem Found

Your screenshot shows only the **checksum file** (.sha256) in the output folder, but **no ISO file**!

```
output/
‚îî‚îÄ‚îÄ furryos-8.0.0-origin-x86_64.iso.sha256  ‚Üê Only this exists
    (missing) furryos-8.0.0-origin-x86_64.iso  ‚Üê Should be here!
```

**Why?** The previous deploy_iso.py was simplified and only created the checksum, not the actual ISO file.

---

## ‚úÖ Fix Applied

**Updated deploy_iso.py** [code_file:80] - Now ACTUALLY builds the ISO!

### What Changed:

1. **Added dependency check**
   - Checks for genisoimage, xorriso, grub tools
   - Tells you what to install if missing

2. **Real ISO creation**
   - Uses `genisoimage` to build proper bootable ISO
   - Falls back to alternative methods if needed
   - Actually creates the .iso file!

3. **Kept persistence features**
   - Still includes setup-persistence.sh
   - Still includes status checker
   - Still supports Ephemeral + Persistent modes

---

## üì• Download Updated Files

### 1. deploy_iso.py [code_file:80] - FIXED VERSION
- **Save to:** /TOP/assets/deploy_iso.py
- **What it does:** Actually creates ISO file + persistence support

### 2. USB_WRITER_GUIDE.md [code_file:91] - NEW
- **USB writing guide for Linux**
- **Includes:** BalenaEtcher, Ventoy, dd instructions
- **Download links and setup**

---

## üöÄ Complete Fix Process

### Step 1: Install Dependencies

```bash
sudo apt-get update
sudo apt-get install genisoimage xorriso grub-pc-bin grub-efi-amd64-bin
```

### Step 2: Replace deploy_iso.py

```bash
cd /TOP/assets
# Delete old version
rm deploy_iso.py
# Download new version [code_file:80]
# Save as deploy_iso.py
chmod +x deploy_iso.py
```

### Step 3: Rebuild ISO

```bash
cd /TOP
./quick_start.sh
```

### Step 4: Verify ISO Exists

```bash
ls -lh output/

# Should now see BOTH:
# furryos-8.0.0-origin-x86_64.iso       ‚Üê ISO file ‚úÖ
# furryos-8.0.0-origin-x86_64.iso.sha256 ‚Üê Checksum ‚úÖ
```

---

## üî• Write ISO to USB (Linux)

### Recommended: BalenaEtcher

```bash
# 1. Install BalenaEtcher (ONE TIME)
wget https://github.com/balena-io/etcher/releases/download/v1.19.25/balena-etcher_1.19.25_amd64.deb
sudo apt install ./balena-etcher_1.19.25_amd64.deb

# 2. Launch
balena-etcher-electron

# 3. In GUI:
#    - Flash from file: output/furryos-8.0.0-origin-x86_64.iso
#    - Select target: Your USB drive
#    - Click "Flash!"

# 4. Wait 3-5 minutes
# 5. Done! Safely remove USB
```

**Why BalenaEtcher?**
- ‚úÖ Works on Linux (Rufus doesn't!)
- ‚úÖ Simple 3-click GUI
- ‚úÖ Prevents accidental hard drive overwrite
- ‚úÖ Automatic verification
- ‚úÖ Shows progress clearly

---

## üìä What You'll Get

### After ISO Build:
```
output/
‚îú‚îÄ‚îÄ furryos-8.0.0-origin-x86_64.iso       ‚Üê 500MB-2GB ISO
‚îî‚îÄ‚îÄ furryos-8.0.0-origin-x86_64.iso.sha256 ‚Üê Checksum
```

### Inside ISO:
```
furryos/
‚îú‚îÄ‚îÄ bin/
‚îÇ   ‚îú‚îÄ‚îÄ heartbeat_core (signed)
‚îÇ   ‚îî‚îÄ‚îÄ metadata_wrangler (signed)
‚îú‚îÄ‚îÄ images/
‚îÇ   ‚îî‚îÄ‚îÄ icon.png
‚îú‚îÄ‚îÄ signing_keys/
‚îÇ   ‚îú‚îÄ‚îÄ furryos_signing.pub
‚îÇ   ‚îî‚îÄ‚îÄ verify_signature.py
‚îî‚îÄ‚îÄ scripts/
    ‚îú‚îÄ‚îÄ setup-persistence.sh  ‚Üê Create persistence
    ‚îî‚îÄ‚îÄ persistence-status.sh ‚Üê Check mode
```

### After Writing to USB:
```
Boot Menu:
1. FurryOS Live (Ephemeral)  ‚Üê Nothing saved
2. FurryOS Live (Persistent) ‚Üê Saves to USB
3. FurryOS Live (Failsafe)
```

---

## üéØ Complete Workflow

```bash
# === ONE TIME SETUP ===

# Install build dependencies
sudo apt-get install genisoimage xorriso grub-pc-bin grub-efi-amd64-bin

# Install USB writer
wget https://github.com/balena-io/etcher/releases/download/v1.19.25/balena-etcher_1.19.25_amd64.deb
sudo apt install ./balena-etcher_1.19.25_amd64.deb

# === BUILD ISO ===

cd /TOP
# Replace deploy_iso.py with fixed version first!
./quick_start.sh

# Verify ISO was created
ls -lh output/furryos-8.0.0-origin-x86_64.iso

# === WRITE TO USB ===

# Launch BalenaEtcher
balena-etcher-electron

# In GUI:
# 1. Select ISO
# 2. Select USB
# 3. Click Flash
# 4. Wait 5 minutes

# === BOOT ===

# 1. Plug in USB
# 2. Reboot
# 3. Press F12 (or F2/Del/Esc)
# 4. Select USB from boot menu
# 5. Choose "FurryOS Live (Ephemeral)"
# 6. Test everything

# === ENABLE PERSISTENCE (OPTIONAL) ===

# In FurryOS terminal:
/furryos/scripts/setup-persistence.sh

# Reboot, select "FurryOS Live (Persistent)"
# Changes now save between boots!

# === YOUR DEBIAN 13 ===

# Completely untouched!
# Boot to hard drive anytime
# Safe and stable
```

---

## üêõ Troubleshooting

### "ISO file not created"
```bash
# Check dependencies
sudo apt-get install genisoimage xorriso grub-pc-bin grub-efi-amd64-bin

# Check for errors during build
./quick_start.sh 2>&1 | tee build.log
cat build.log | grep -i error
```

### "Only checksum file exists"
```bash
# Old deploy_iso.py - replace it!
# Download fixed version [code_file:80]
# Save to /TOP/assets/deploy_iso.py
# Rebuild
```

### "BalenaEtcher won't start on Linux"
```bash
# Install dependency
sudo apt install libfuse2

# Or try AppImage version
wget https://github.com/balena-io/etcher/releases/download/v1.19.25/balenaEtcher-1.19.25-x64.AppImage
chmod +x balenaEtcher-1.19.25-x64.AppImage
./balenaEtcher-1.19.25-x64.AppImage
```

---

## üìã Files to Download

| **File** | **ID** | **Purpose** | **Save To** |
|----------|--------|-------------|-------------|
| deploy_iso.py | [code_file:80] | Fixed ISO builder | /TOP/assets/ |
| USB_WRITER_GUIDE.md | [code_file:91] | USB writing guide | Reference |

---

## ‚úÖ Summary

**Problem:** ISO wasn't being created, only checksum file

**Solution:** Updated deploy_iso.py to actually build ISO using genisoimage

**USB Writer:** BalenaEtcher (works on Linux, Rufus doesn't)

**Workflow:**
1. Install dependencies (genisoimage, xorriso, etc.)
2. Replace deploy_iso.py with fixed version
3. Rebuild: ./quick_start.sh
4. Install BalenaEtcher
5. Write ISO to USB
6. Boot and enjoy FurryOS with persistence!

**Result:** Working bootable USB with Ephemeral and Persistent modes, Debian 13 completely untouched!

üêæ **Go build and boot The Origin!** üå±
