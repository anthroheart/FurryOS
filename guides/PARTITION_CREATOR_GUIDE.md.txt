# ğŸ”§ FurryOS Partition Creator - Usage Guide

## âœ… WHAT THIS FIXES

**Problem:** Raw ISO copy doesn't create boot partitions â†’ BIOS doesn't see USB

**Solution:** Proper partitioned USB with GRUB bootloader

---

## ğŸ“¦ **WHAT IT CREATES**

### **Partition Layout:**
```
/dev/sdb
â”œâ”€â”€ /dev/sdb1 - BIOS Boot (1MB) - for Legacy BIOS
â”œâ”€â”€ /dev/sdb2 - EFI System (512MB, FAT32) - for UEFI
â”œâ”€â”€ /dev/sdb3 - SWAP (2GB) - for performance
â””â”€â”€ /dev/sdb4 - Root (remaining, ext4) - FurryOS system
```

### **Bootloaders:**
- âœ… GRUB UEFI (modern computers)
- âœ… GRUB Legacy (older BIOS)
- âœ… Works on ANY computer!

### **GRUB Menu:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FurryOS 8.0.0 - The Origin          â”‚ â† Main boot
â”‚ FurryOS 8.0.0 - Recovery Mode       â”‚ â† If issues
â”‚ FurryOS 8.0.0 - Safe Mode           â”‚ â† Minimal drivers
â”‚ Memory Test (memtest86+)            â”‚
â”‚ Reboot                              â”‚
â”‚ Shutdown                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**This menu shows "FurryOS", NOT "Debian"!**

---

## ğŸš€ **USAGE**

### **Step 1: Make sure ISO is built**
```bash
# Check if ISO exists
ls -lh /TOP/output/furryos-*.iso

# If not found, build it:
cd /TOP
sudo python3 assets/deploy_iso.py
```

### **Step 2: Plug in USB drive (16GB+)**
```bash
# Find your USB device
lsblk

# Example output:
# sdb      8:16   1  14.9G  0 disk   â† This is your USB
# â””â”€sdb1   8:17   1  14.9G  0 part
```

### **Step 3: Run partition creator**
```bash
# Run as root
sudo python3 /TOP/assets/create_partitions.py

# It will:
# 1. List available devices
# 2. Ask you to select USB device (e.g., /dev/sdb)
# 3. Warn about data erasure
# 4. Create partitions
# 5. Format partitions
# 6. Extract ISO
# 7. Install GRUB
# 8. Configure boot
# 9. Done!
```

### **Step 4: Eject and boot**
```bash
# Safely eject
sync
sudo eject /dev/sdb

# Physically remove USB
# Boot from USB in BIOS
```

---

## â±ï¸  **TIMELINE**

```
Total time: 20-40 minutes

[0-2 min]    Partitioning and formatting
[2-25 min]   Extracting ISO contents (9GB)
[25-27 min]  Installing GRUB
[27-28 min]  Configuration
[28-30 min]  Finalization
```

**Go touch grass during the ISO extraction phase!** ğŸŒ±

---

## ğŸ“Š **EXAMPLE OUTPUT**

```
================================================================================
   ğŸ”§ FURRYOS USB PARTITION CREATOR ğŸ”§
   Version: 8.0.0-origin
   Creates: UEFI + Legacy bootable USB with proper partitions
================================================================================

ğŸ” Checking dependencies...
  âœ“ All dependencies found

ğŸ“€ Found ISO: furryos-8.0.0-origin-x86_64.iso
   Size: 8.84 GB

ğŸ“€ Available Storage Devices:

NAME  SIZE   TYPE  MODEL
sda   500G   disk  Samsung SSD 850
sdb   14.9G  disk  SanDisk Cruzer

ğŸ“Œ Enter target USB device (e.g., /dev/sdb): sdb

ğŸ“Š Selected device:
NAME  SIZE   TYPE  MODEL
sdb   14.9G  disk  SanDisk Cruzer

âš ï¸  ALL DATA ON /dev/sdb WILL BE ERASED! Continue? [y/N]: y

â±ï¸  This process will take 20-40 minutes
ğŸ¾ Go touch grass! ğŸŒ±

Press Enter to begin or Ctrl+C to cancel...

ğŸ”“ Unmounting /dev/sdb...
  âœ“ Device unmounted

ğŸ”§ Creating partitions on /dev/sdb...
  ğŸ“ Wiping partition table...
  ğŸ“ Creating GPT partition table...
  ğŸ“ Creating BIOS boot partition (1MB)...
  ğŸ“ Creating EFI partition (512MB)...
  ğŸ“ Creating SWAP partition (2GB)...
  ğŸ“ Creating Root partition (remaining space)...
  âœ“ Partitions created

ğŸ’¾ Formatting partitions...
  â­ï¸  Skipping /dev/sdb1 (BIOS boot partition)
  ğŸ’¾ Formatting /dev/sdb2 as FAT32 (EFI)...
  ğŸ’¾ Creating SWAP on /dev/sdb3...
  ğŸ’¾ Formatting /dev/sdb4 as ext4 (Root)...
  âœ“ All partitions formatted

ğŸ“‚ Mounting partitions...
  âœ“ Mounted /dev/sdb4 â†’ /mnt/furryos_install
  âœ“ Mounted /dev/sdb2 â†’ /mnt/furryos_install/boot/efi

ğŸ“¦ Extracting ISO contents...
  âœ“ ISO mounted at /mnt/furryos_iso
  ğŸ“‚ Copying files (this may take 10-20 minutes)...
  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
  âœ“ ISO contents extracted

ğŸ”¥ Installing GRUB bootloader...
  ğŸ”¥ Installing GRUB for UEFI...
  ğŸ”¥ Installing GRUB for Legacy BIOS...
  âœ“ GRUB installed (UEFI + Legacy)

ğŸ“ Creating GRUB configuration...
  âœ“ GRUB config created

ğŸ“ Creating /etc/fstab...
  âœ“ fstab created

âœ¨ Finalizing installation...
  ğŸ’¾ Syncing filesystem...
  ğŸ”“ Unmounting...
  âœ“ Installation finalized

================================================================================
   ğŸ‰ FURRYOS USB CREATED SUCCESSFULLY! ğŸ‰
================================================================================

ğŸ“€ Device: /dev/sdb
â±ï¸  Time: 23m 45s

âœ… Partitions Created:
   1. /dev/sdb1 - BIOS Boot (1MB)
   2. /dev/sdb2 - EFI System (512MB, FAT32)
   3. /dev/sdb3 - SWAP (2GB)
   4. /dev/sdb4 - Root (ext4, LABEL=FURRYOS)

âœ… Bootloaders Installed:
   â€¢ GRUB UEFI (for modern systems)
   â€¢ GRUB Legacy (for older BIOS)

ğŸ”¥ GRUB Menu Will Show:
   â€¢ FurryOS 8.0.0 - The Origin
   â€¢ FurryOS 8.0.0 - Recovery Mode
   â€¢ FurryOS 8.0.0 - Safe Mode
   â€¢ Memory Test

ğŸš€ Next Steps:
   1. Safely eject USB: sync && sudo eject /dev/sdb
   2. Boot from USB
   3. Select 'FurryOS 8.0.0 - The Origin'
   4. Enjoy! ğŸ¾

ğŸ¾ The Origin is ready to boot! ğŸŒ±
```

---

## ğŸ¯ **WHAT CHANGED FROM ISO WRITE**

### **Before (BalenaEtcher/dd):**
```
âŒ No partition table
âŒ No GRUB bootloader
âŒ BIOS doesn't see USB
âŒ Shows as "not bootable"
```

### **After (create_partitions.py):**
```
âœ… Proper GPT partition table
âœ… GRUB installed (UEFI + Legacy)
âœ… BIOS sees USB as bootable
âœ… Shows "FurryOS" in boot menu
âœ… SWAP enabled
âœ… Proper filesystem labels
```

---

## ğŸ” **VERIFICATION**

### **After creation, verify:**

```bash
# Check partitions
lsblk /dev/sdb

# Should show:
# NAME   SIZE  TYPE LABEL
# sdb    14.9G disk
# â”œâ”€sdb1   1M  part          â† BIOS Boot
# â”œâ”€sdb2 512M  part FURRYOS_EFI â† EFI
# â”œâ”€sdb3   2G  part FURRYOS_SWAP â† SWAP
# â””â”€sdb4 12.4G part FURRYOS   â† Root

# Check filesystems
sudo blkid /dev/sdb*

# Should show:
# /dev/sdb2: LABEL="FURRYOS_EFI" TYPE="vfat"
# /dev/sdb3: LABEL="FURRYOS_SWAP" TYPE="swap"
# /dev/sdb4: LABEL="FURRYOS" TYPE="ext4"
```

---

## ğŸ¾ **TROUBLESHOOTING**

### **Error: "No FurryOS ISO found"**
```bash
# Build ISO first:
cd /TOP
sudo python3 assets/deploy_iso.py
```

### **Error: "Device /dev/sdb not found"**
```bash
# Check device name:
lsblk

# Use correct name (might be sdc, sdd, etc.)
```

### **Error: "Permission denied"**
```bash
# Run as root:
sudo python3 /TOP/assets/create_partitions.py
```

### **GRUB doesn't show in BIOS**
```bash
# Check BIOS settings:
# 1. Disable Secure Boot
# 2. Enable CSM/Legacy Boot
# 3. Enable USB Boot
# 4. Try different USB port (USB 2.0)
```

### **SWAP not active after boot**
```bash
# Check swap status:
swapon --show

# If not active, activate:
sudo swapon LABEL=FURRYOS_SWAP

# Make permanent (already in fstab):
cat /etc/fstab | grep SWAP
```

---

## ğŸ“‹ **DEPENDENCIES**

### **Required packages:**
```bash
sudo apt-get install \
    parted \
    dosfstools \
    e2fsprogs \
    grub-pc-bin \
    grub-efi-amd64-bin \
    rsync
```

### **Auto-checked by script:**
- `parted` - partition management
- `mkfs.vfat` - FAT32 formatting
- `mkfs.ext4` - ext4 formatting
- `mkswap` - SWAP creation
- `grub-install` - bootloader installation
- `rsync` - file copying with progress

---

## âœ… **COMPARISON: ISO vs PARTITIONS**

| Feature | ISO Write (dd/Etcher) | Partition Creator |
|---------|----------------------|-------------------|
| **Boot Partition** | âŒ No | âœ… Yes (BIOS + EFI) |
| **SWAP** | âŒ No | âœ… Yes (2GB) |
| **GRUB Menu** | âŒ No | âœ… Yes (FurryOS branding) |
| **BIOS Detection** | âŒ Sometimes fails | âœ… Always works |
| **UEFI Support** | âš ï¸ Limited | âœ… Full |
| **Legacy BIOS** | âš ï¸ Limited | âœ… Full |
| **Filesystem Labels** | âŒ No | âœ… Yes |
| **fstab** | âŒ No | âœ… Yes |
| **Persistence** | âš ï¸ Manual setup | âœ… Ready |

---

## ğŸ‰ **SUMMARY**

**Use this when:**
- âœ… BIOS doesn't see ISO-written USB
- âœ… Want proper partitions with SWAP
- âœ… Want "FurryOS" to show in boot menu
- âœ… Need UEFI + Legacy support
- âœ… Building final production USB

**Use ISO write (dd/Etcher) when:**
- âœ… Quick testing
- âœ… Single live session
- âœ… Your BIOS accepts raw ISO format

---

**For production/distribution: Use create_partitions.py** ğŸ”¥

**It creates a REAL bootable USB that works everywhere!** ğŸš€

---

ğŸ¾ **From The Origin, all things boot!** ğŸŒ±
